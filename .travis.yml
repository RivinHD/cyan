language: cpp
compiler: g++
dist: xenial
sudo: required

before_install:
  - sudo apt remove --purge imagemagick imagemagick-common
  - sudo apt-get update

install:
  - sudo apt-get install cmake tree qtbase5-dev libpng-dev libjpeg-dev liblcms2-dev libtiff-dev libbz2-dev zlib1g-dev liblzma-dev
  - sudo apt-get install scons autoconf automake autopoint bash bison bzip2 flex g++ g++-multilib gettext git gperf intltool
  - sudo apt-get install libc6-dev-i386 libgdk-pixbuf2.0-dev libltdl-dev libssl-dev libtool-bin libxml-parser-perl make
  - sudo apt-get install openssl p7zip-full patch perl pkg-config python ruby sed unzip wget xz-utils wine
  - sudo apt-get install libfreetype6-dev libfontconfig1-dev
  
script:
  - sh res/travis.sh

deploy:
  provider: releases
  api_key: ${GITHUB_TOKEN}
  file_glob: true
  file: /opt/deploy/*
  skip_cleanup: true
  draft: true
  on:
    repo: rodlie/cyan
    tags: true
